<?xml version="1.0" encoding="UTF-8"?>

<Diggs xmlns="http://diggsml.org/schemas/2.5.a"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://diggsml.org/schemas/2.5.a ../Complete.xsd"
    xmlns:diggs_geo="http://diggsml.org/schemas/2.5.a/geotechnical"
    xmlns:diggs_pip="http://diggsml.org/schemas/2.5.a/pipeline"
    xmlns:witsml="http://www.witsml.org/schemas/131" xmlns:glr="http://www.opengis.net/gml/3.3/lr"
    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:g3.3="http://www.opengis.net/gml/3.3/ce"
    xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:diggs="http://diggsml.org/schemas/2.5.a"
    xmlns:glrov="http://www.opengis.net/gml/3.3/lrov" gml:id="Pipeline_Example_1">

    <documentInformation>
        <DocumentInformation gml:id="pe-di1">
            <creationDate>2018-06-15</creationDate>
        </DocumentInformation>
    </documentInformation>

    <project>
        <Project gml:id="pip1">
            <gml:name>GeoSyntec Pipeline Inspection Project</gml:name>
        </Project>
    </project>

    <samplingFeature>
        <diggs_pip:Pipeline gml:id="pipe-1">
            <gml:name>Pipeline 101</gml:name>
            <investigationTarget>Pipeline</investigationTarget>
            <projectRef xlink:href="#pip1"/>
            <referencePoint>
                <PointLocation gml:id="pipe-1_rp">
                    <gml:pos srsDimension="3" srsName="urn:def:crs:DIGGS:0.1:3734_6360">100000
                        100000 100 </gml:pos>
                    <!-- EPSG code 3734 is Ohio North State Plane, NAD83 (ftUS), and 6360 is NAVD88 height (ftUS), so coordinates of reference point (starting point of pipeline is 100000E, 100000N, 100 ft elevation.-->
                </PointLocation>
            </referencePoint>
            <centerLine>
                <LinearExtent gml:id="pipe-1_cl">
                    <gml:posList srsDimension="3" srsName="urn:def:crs:DIGGS:0.1:3734_6360">100000
                        100000 100 110000 100000 100</gml:posList>
                    <!-- The first 3 number tuple is the starting point of the pipe (same as reference point), and the final tuple is the ending point. In this case the pipeline trends  W-E, is perfectly horizontal, and is 10000 ft long. This centerline should reflect the entire pipeline length, not just a section that is inspected -->
                </LinearExtent>
            </centerLine>
            <linearReferencing>
                <LinearSpatialReferenceSystem gml:id="pipe-1_lrs">
                    <gml:identifier codeSpace="DIGGS">pipe-1_lrs</gml:identifier>
                    <glr:linearElement xlink:href="#pipe-1_cl"/>
                    <!-- This element references the pipeline's centerline -->
                    <glr:lrm>
                        <glr:LinearReferencingMethod gml:id="pipe-1_lrm">
                            <glr:name>chainage</glr:name>
                            <!-- chainage should be the term used in all cases, meaning distance measured along the pipeline's centerline-->
                            <glr:type>absolute</glr:type>
                            <!-- Measurements is an absolute distance measured from the pipeline's reference point -->
                            <glr:units>ft</glr:units>
                            <!-- Distance measurements are in feet -->
                        </glr:LinearReferencingMethod>
                    </glr:lrm>
                </LinearSpatialReferenceSystem>
            </linearReferencing>
            <diggs_pip:pipelineCharacteristics>
                <diggs_pip:PipelineCharacteristics gml:id="pipe-1_pc">
                    <!-- Note, no location is used here, implying that the characteristics listed apply to the entire pipeline. Otherwise, you would use a location property to identify the reach of the pipe for which listed characteristics apply. -->
                    <diggs_pip:pipelineMaterial>stainless steel</diggs_pip:pipelineMaterial>
                </diggs_pip:PipelineCharacteristics>
            </diggs_pip:pipelineCharacteristics>
        </diggs_pip:Pipeline>
    </samplingFeature>

    <measurement>
        <Monitor gml:id="pipe-1_inpection">
            <investigationTarget>Pipeline</investigationTarget>
            <projectRef xlink:href="#pip1"/>
            <samplingFeatureRef xlink:href="#pipe-1"/>
            <reading>
                <Reading gml:id="pipe-1_reading1">
                    <responseZoneLocation>
                        <!-- This is where you identify the location where the monitoring activity takes place -->
                        <PointLocation gml:id="pipe-1_rzl1">
                            <gml:description>Station 1000+21</gml:description> <!-- Best practice to use the gml:desription property as a label for the station location -->
                            <gml:pos srsDimension="1" srsName="#pipe-1_lrs">1021</gml:pos> <!-- Point to the linear referencing system for the pipeline, value of gml:pos is the distance down the pipeline -->
                        </PointLocation>
                    </responseZoneLocation>
                    <outcome>
                        <MonitorResult gml:id="pipe-1_reading1_mr">
                            <timeDomain>
                                <MultiTimeInstant gml:id="pipe-1_mti1">
                                    <timeMember>
                                        <gml:TimeInstant gml:id="pipe-1_ti1">
                                            <gml:timePosition>2018-05-10</gml:timePosition>
                                            <!-- Date from form goes here. Can have multiple times in additional TimeMember properties-->
                                        </gml:TimeInstant>
                                    </timeMember>
                                </MultiTimeInstant>
                            </timeDomain>
                            <results>
                                <ResultSet>
                                    <parameters>
                                        <PropertyParameters gml:id="pipe-1_pp1">
                                            <properties>
                                                <Property index="1" gml:id="weather">
                                                  <typeData>string</typeData>
                                                  <propertyClass codeSpace="DIGGS">weather</propertyClass>
                                                </Property>
                                                <Property index="2" gml:id="temperature">
                                                  <typeData>double</typeData>
                                                  <propertyClass codeSpace="DIGGS">temperature</propertyClass>
                                                  <uom>degF</uom>
                                                </Property>
                                                <Property index="3" gml:id="siteCondition">
                                                    <typeData>string</typeData>
                                                    <propertyClass codeSpace="DIGGS">siteCondition</propertyClass>
                                                </Property>
                                                <Property index="4" gml:id="pipelineCondition">
                                                    <typeData>string</typeData>
                                                    <propertyClass codeSpace="DIGGS">pipelineCondition</propertyClass>
                                                </Property>
                                                <Property index="5" gml:id="release">
                                                    <typeData>string</typeData>
                                                    <propertyClass codeSpace="DIGGS">release</propertyClass>
                                                </Property>
                                                <Property index="6" gml:id="followup">
                                                    <typeData>string</typeData>
                                                    <propertyClass codeSpace="DIGGS">followup</propertyClass>
                                                </Property>
                                                <Property index="7" gml:id="risk">
                                                    <typeData>string</typeData>
                                                    <propertyClass codeSpace="DIGGS">risk</propertyClass>
                                                </Property>
                                            </properties>
                                        </PropertyParameters>
                                    </parameters>
                                    <dataValues cs="," ts=" " decimal=".">"sunny",54.0,"dry","old","yes","yes","high"</dataValues>
                                </ResultSet>
                            </results>
                        </MonitorResult>
                    </outcome>
                </Reading>
            </reading>
        </Monitor>
    </measurement>
</Diggs>
